<!DOCTYPE html>
<html lang="en" class="bg-white text-gray-900">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home Page</title>
  <link href="/output.css" rel="stylesheet" />
</head>
<body class="font-sans">

  <!-- NAVBAR -->
  <nav class="bg-white shadow">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="/" class="text-2xl font-bold text-orange-600">AirbnbClone</a>
      <% if (isLoggedIn) { %>
        <div class="flex items-center gap-6 text-sm font-medium">
          <a href="/host/add-home" class="text-gray-600 hover:text-orange-600">➕ Add Home</a>
          <a href="/bookings" class="text-gray-600 hover:text-orange-600">📑 Bookings</a>
          <a href="/favourite-list" class="text-gray-600 hover:text-orange-600">❤️ Favourite List</a>
          <a href="/reserve" class="text-gray-600 hover:text-orange-600">📅 Reserve</a>
          <form action="/auth/logout" method="POST">
            <button type="submit" class="text-gray-600 hover:text-red-500">🚪 Logout</button>
          </form>
        </div>
      <% } else { %>
        <div class="flex items-center gap-6 text-sm font-medium">
          <a href="/auth/login" class="text-gray-600 hover:text-orange-600">🔐 Login</a>
          <a href="/auth/signup" class="text-gray-600 hover:text-orange-600">🔐 SignUp</a>
        </div>
      <% } %>
    </div>
  </nav>

  <!-- HEADER -->
  <% if (isLoggedIn) { %>
    <header class="py-12 text-center bg-gray-50">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Let's find a home that's perfect for you</h1>
      <p class="text-gray-500 mt-3 text-lg">Browse confidently with your trusted source</p>
      <form action="/search" method="GET" class="mt-6 flex justify-center">
        <input type="text" name="q" placeholder="Search homes..."
          class="w-96 px-4 py-2 border rounded-lg shadow-sm focus:outline-none" />
      </form>
    </header>

    <!-- REGISTERED HOMES -->
    <main class="max-w-7xl mx-auto px-4">
      <section class="py-12">
        <h2 class="text-3xl font-bold text-center text-orange-600 mb-10">🏠 Your Registered Homes</h2>
        <% if (registered.length > 0) { %>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
            <% registered.forEach(home => { %>
              <div class="border rounded-lg shadow p-4 flex flex-col justify-between">
                <img src="<%= home.photo || 'https://via.placeholder.com/400x200' %>" alt="Home" class="rounded-lg h-40 w-full object-cover mb-4">
                <div>
                  <h3 class="text-xl font-semibold"><%= home.housename %></h3>
                  <p class="text-sm text-gray-600">📍 Location: <%= home.location || 'Unknown' %></p>
                  <p class="text-sm text-gray-600">💰 Price: ₹<%= home.price %>/night</p>
                  <p class="text-yellow-500 text-sm">⭐ Rating: <%= home.rating || '4.5' %></p>
                </div>
                <div class="mt-4 space-y-2">
                  <a href="/book" class="block bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded text-center">🛏️ Book</a>
                  <a href="/home-detail/<%= home._id %>" class="block border border-gray-300 text-gray-700 py-2 px-4 rounded text-center">🏠 Home Details</a>
                  <a href="/edit-home/<%= home._id %>" class="block bg-blue-100 text-blue-700 py-2 px-4 rounded text-center">✏️ Edit Home</a>
                  <form action="/favourite-list" method="POST">
                    <input type="hidden" name="id" value="<%= home._id %>">
                    <input type="hidden" name="housename" value="<%= home.housename %>">
                    <input type="hidden" name="location" value="<%= home.location %>">
                    <input type="hidden" name="price" value="<%= home.price %>">
                    <input type="hidden" name="rating" value="<%= home.rating %>">
                    <input type="hidden" name="photo" value="<%= home.photo %>">
                    <button type="submit"
                      class="w-full bg-red-100 text-red-600 border border-red-300 py-2 px-4 rounded hover:bg-red-200">❤️ Add to Favourites</button>
                  </form>
                  <form action="/delete-home/<%= home._id %>" method="POST"
                    onsubmit="return confirm('Are you sure you want to delete this home?');">
                    <button type="submit"
                      class="w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600">🗑️ Delete</button>
                  </form>
                </div>
              </div>
            <% }) %>
          </div>
        <% } else { %>
          <p class="text-center text-lg text-gray-500">No homes registered yet.</p>
        <% } %>

        <div class="flex justify-center mt-10">
          <a href="/host/add-home"
            class="inline-block bg-orange-500 text-white text-lg font-medium px-6 py-3 rounded-lg shadow hover:bg-orange-600">
            ➕ Add New Home
          </a>
        </div>
      </section>
    </main>
  <% } %>

  <!-- FOOTER -->
  <footer class="text-center text-gray-400 text-sm mt-12 py-6 border-t">
    &copy; 2025 AirbnbClone. All rights reserved.
  </footer>

</body>
</html>
